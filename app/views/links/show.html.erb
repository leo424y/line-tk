<div class='relative'>
<div>
<%= form_tag mail_link_path, method: :get, class:"form-inline px-8" do %>
    <%# submit_tag "", name: nil, class: "btn btn-default" %>
    <%= text_field_tag :mail, params[:mail], class: 'w-full mt-6', placeholder: session[:mail].present? ? session[:mail] : 'Your ID/Email/Phone..' %>
<% end %>
</div>
<div class="grid grid-cols-2 gap-4">
<div class='col-span-2'>
<a href="<%= @link.url %>" target='_blank' class="max-w-md mx-auto text-2xl text-gray-500 sm:text-2xl md:mt-5 md:max-w-3xl" class="flex-col rounded-sm shadow-lg overflow-hidden">
  <div class="flex-1 px-8 flex flex-col justify-between">
    <div class="flex-1">
        <p class="text-2xl font-bold text-gray-800 text-justify">
<%= @link.note %>
        </p>
    </div>
  </div>
</a>
</div>
</div>
<div class="fixed bottom-0 grid grid-cols-4 gap-4">
<div class='col-span-1'>
<a href="<%= like_link_path(@link) %>" class="max-w-md mx-auto text-2xl text-gray-500 sm:text-2xl md:mt-5 md:max-w-3xl" class="flex-col rounded-sm shadow-lg overflow-hidden">
  <div class="flex-1 flex flex-col justify-between">
    <div class="flex-1">
        <p class="text-2xl font-semibold text-gray-100 line-clamp-2 m-5">
👍
        </p>
    </div>
  </div>
</a>
</div>
<div class='col-span-1'>
<a href="<%= skip_link_path(@link) %>" class="max-w-md mx-auto text-2xl text-gray-500 sm:text-2xl md:mt-5 md:max-w-3xl" class="flex-col rounded-sm shadow-lg overflow-hidden">
  <div class="flex-1 flex flex-col justify-between">
    <div class="flex-1">
        <p class="text-2xl font-semibold text-gray-100 line-clamp-2 m-5">
⏭️
        </p>
    </div>
  </div>
</a>
</div>
<div class='col-span-1'>
<a class='col-span-1' href="<%= mails_path %>" class="max-w-md mx-auto text-2xl text-gray-500 sm:text-2xl md:mt-5 md:max-w-3xl" class="flex-col rounded-sm shadow-lg overflow-hidden">
  <div class="flex-1 flex flex-col justify-between">
    <div class="flex-1">
        <p class="text-2xl font-semibold text-gray-100 line-clamp-2 m-5">
🕥
        </p>
    </div>
  </div>
</a>
</div>

</div>
</div>

</div>

<%# link_to 'Edit', edit_link_path(@link) %>
<%# link_to 'Back', links_path %>
<%
=begin%>

<div id="log" target='_blank'><%= "#{@link.url}#:~:text=#{CGI.escape @link.note}" %></div>
<button onclick="bitly()">shorten</button>

<script>
const log = document.getElementById('log');
function bitly(){
fetch('https://api-ssl.bitly.com/v4/shorten', {
    method: 'POST',
    headers: {
        'Authorization': 'Bearer 4f231d5f658fbb0c156377a46fbb27210402f9d2',
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({ "long_url": log.textContent, "domain": "flyis.me" })
}).then((response) => {
    // 這裡會得到一個 ReadableStream 的物件
    console.log(response);
    // 可以透過 blob(), json(), text() 轉成可用的資訊
    return response.json();
  }).then((jsonData) => {
    console.log(jsonData);
  //   var result = JSON.stringify(jsonData, null, 2);
  // bly.textContent = result;

  // blys.textContent = jsonData.link;
  // blys.href = jsonData.link;
}).catch((err) => {
    console.log('錯誤:', err);
});
}

window.onload = bitly;
</script> 
<%
=end%>
